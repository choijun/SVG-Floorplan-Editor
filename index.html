<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>jQuery SVG Floorplan creator</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://keith-wood.name/js/jquery.svg.js"></script>
	<script type="text/javascript" src="http://keith-wood.name/js/jquery.svgdom.js"></script>
	<script type="text/javascript" src="./svgfloorplans.js"></script>
	<style type="text/css">@import "http://keith-wood.name/css/jquery.svg.css";</style>
	<style type="text/css">
		/* Full page */
			* {margin: 0; padding: 0; border: 0; overflow: hidden;}
			html, body {height: 100%;}
		/* Prevent the cursor going screwy by disabling selections */
			body {-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none; user-select: none;}
			div.clear {clear: both!important; height: 1px!important; margin: -1px 0 0 0!important; overflow: hidden!important; float: none!important;}
		/* Floorplanner - Basic layout */
			#floorplanner	{position: absolute; top: 0;		left: 0;		right: 0;		bottom: 0;		background: #DADADA; overflow: hidden;}
			#tools			{position: absolute; top: 0;		left: 0;		width: 202px;	height: 102px;	background: #FFFFFF; overflow: hidden;}
			#tool_options	{position: absolute; top: 103px;	left: 0;		width: 202px;	bottom: 0;		background: #FFFFFF; overflow-y: scroll; overflow-x: hidden;}
			#stage			{position: absolute; top: 0;		left: 203px;	right: 0;		bottom: 23px;	background: #EBEBEB; overflow: auto;}
			#status			{position: absolute; height: 22px;	left: 203px;	right: 0;		bottom: 0;		background: #FFFFFF; overflow: hidden;}
			/* Tools */
				#tools button {float: left; width: 48px; height: 48px; margin: 2px 0 0 2px; text-indent: 100px; background-color: #EEEEEE; background-position: center center; background-repeat: no-repeat; cursor: pointer;}
				#tools button:hover,
				#tools button.active	{background-color: #F07746;}
				#tools button.active	{border-color: #333333;}
				/* Icons */
					button.pointer	{background-image: url('./gfx/pointer.png');}
					button.labels	{background-image: url('./gfx/labels.png');}
					button.arrows	{background-image: url('./gfx/arrows.png');}
					button.asbestos	{background-image: url('./gfx/asbestos.png');}
					button.items	{background-image: url('./gfx/items.png');}
					button.walls	{background-image: url('./gfx/walls.png');}
					button.floors	{background-image: url('./gfx/floors.png');}
					button.images	{background-image: url('./gfx/images.png');}
			/* Tool Options */
				#tool_options button		{padding: 5px; margin: 2px; cursor: pointer;}
				#tool_options button:hover	{background: #EEEEEE;}
			/* Stage */
				#inner		{position: absolute; top: 50%; left: 50%; width: 1000px; height: 800px; margin: -400px 0 0 -500px; background: #FFFFFF; -webkit-box-shadow: 0px 0px 10px 1px #CCCCCC; -moz-box-shadow: 0px 0px 10px 1px #CCCCCC; box-shadow: 0px 0px 10px 1px #CCCCCC;}
				#svg_bg,
				#svg_source {position: absolute; top: 0; left: 0; width: 100%; height: 100%;}
			/* Status */
				#status {text-align: center; font-family: monospace; line-height: 22px; color: #666666;}
				#status span		{display: -moz-inline-stack; display: inline-block; zoom: 1; *display: inline;}
				#status #version	{width: 140px;}
				#status #snap,
				#status #drag		{width: 100px;}
				#status #button		{width: 10px;}



		/* The toolbar * /
			#toolbar	{width: 200px; float: left;}
			.tool		{width: 80px; height: 48px; margin: 0 0 5px 0;}
			.tool [type=checkbox]	{height: 48px;}
			.tool button			{float: right; width: 48px; height: 48px; }
			.tool button:hover,
			.tool.active button		{background-color: #FFFFFF;}
			.tool.active button		{}




		#editor {position: relative; float: left; width: 800px; height: 600px;}
		*/
	</style>
</head>
<body>

	<!-- The Floorplanner -->
	<div id="floorplanner">
		<!-- Tools -->
		<div id="tools">
			<button class="pointer">pointer</button>
			<button class="labels">Labels</button>
			<button class="arrows">Arrows</button>
			<button class="asbestos">Asbestos</button>
			<button class="items">Items</button>
			<button class="walls">Walls</button>
			<button class="floors">Floors</button>
			<button class="images">Images</button>
		</div>
		<!-- Tool Options -->
		<div id="tool_options">
			<h3>Simple tests...</h3>
			<button onclick="FP.tests.selectRandomElement();">add a random element to the selection</button>
			<button onclick="FP.selection.clear();">clear selection</button>

			<button onclick="FP.tests.selectionMove(10, 0);">move selection right</button>
			<button onclick="FP.tests.selectionMove(-10, 0);">move selection left</button>
			<button onclick="FP.tests.selectionMove(0, -10);">move selection up</button>
			<button onclick="FP.tests.selectionMove(0, 10);">move selection down</button>

			<button onclick="FP.tests.selectionFlip('x-axis');">flip on x-axis</button>
			<button onclick="FP.tests.selectionFlip('y-axis');">flip on y-axis</button>

			<button onclick="FP.tests.selectionRotate(45);">rotate clockwise</button>
			<button onclick="FP.tests.selectionRotate(-45);">rotate anti-clockwise</button>

			<p>...</p>

			<button onclick="FP.tests.addItem('item001');">add a door</button>
			<button onclick="FP.tests.addItem('asbestos001');">add an asbestos icon</button>
			<button onclick="FP.tests.deleteRandomItem();">delete a random element</button>

			<button onclick="FP.tests.addItem('item001');">select just a path?</button>
			<button onclick="FP.tests.addItem('item001');">add a path</button>
			<button onclick="FP.tests.addItem('asbestos001');">move a point within a path</button>
			<button onclick="FP.tests.deleteRandomItem();">delete a point from a path</button>
		</div>
		<!-- Stage -->
		<div id="stage">
			<div id="inner">
				<div id="svg_bg"></div>
				<div id="svg_source"></div>
			</div>
		</div>
		<!-- Status -->
		<div id="status">
			<span id="version"	title="version">SVGFPE v0.2</span>
			<span id="snap"		title="mouse coords">?,?</span>
			<span id="button"	title="button status">&#x26AA;</span>
			<span id="drag"		title="mouse drag">?,?</span>
		</div>
	</div>


	<!--

	<div id="toolbar">
	</div>

	
	<div id="editor">
		SVG BG (grid)
	</div>


	<!-- 

	<div class="clear"></div>


	<h1>TODO</h1>
	<ol>
		<li>Code layout for: pointer, text, arrow, asbestos, items, walls, floors, images</li>
		<li>Code layout for: event routing - what are the events?</li>
		<li>Code layout for: selections: add to selection (highlight), remove from selection (unhighlight), clear (aka remove all), apply (to entire selection)</li>
		<li>Plan: minimum feature set, what to do today</li>
		<li>Make the stage huge</li>
		<li>Layer toggling (use display=&quot;none&quot;)</li>
		<li>Pointer - Click to select one - activate correct &quot;tool&quot;</li>
		<li>Pointer - Drag to select multiple - loop visible layers, find objects within bounds - if multiple, keep pointer active</li>
		<li>Selection - drag to move (single or multiple) - DELETE to delete</li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ol>

	<h1>Time log</h1>
	<p>9hrs, 10hrs</p>
	
	<h2>How to move an item</h2>
	<pre>
// Reference the SVG object
var svg = $('#svg_source').svg('get');
// Grab the second item in the walls group (should be a door)
var item = $('#walls use:eq(1)', svg.root());
// Move it
item.attr('transform', 'translate(220,300)');
	</pre>

	<h2>How to use an SVG in HTML (for print)</h2>
	<p>I need to look at the &lt;svg /&gt; containers properties viewBox &amp; preserveAspectRatio - possibly settings them to:</p>
	<pre>
viewBox="YMIN XMIN YMAX XMAX"
preserveAspectRatio="xMidYMid meet"
	</pre>
	<p>Maybe I should change these values when we save / load?</p>
	<object type="image/svg+xml" width="200" height="200" data="./floorplan.svg">
		<span/>
	</object>

	-->

</body>
</html>